<!DOCTYPE html>
<html lang="en">
<head>
<link rel="manifest" href="manifest.json">
<meta charset="UTF-8">
<title>Vibe with Jishnu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0a0f2e">Â 

<style>
Â  Â  .trailer-link-box {

Â  Â  Â  Â  display: block;

Â  Â  Â  Â  width: 90%;

Â  Â  Â  Â  max-width: 700px;

Â  Â  Â  Â  margin: 10px auto;

Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  background: linear-gradient(90deg, rgba(106, 91, 255, 0.2), rgba(184, 75, 255, 0.2));

Â  Â  Â  Â  border: 1px solid #6a5bff;

Â  Â  Â  Â  border-radius: 12px;

Â  Â  Â  Â  text-decoration: none;

Â  Â  Â  Â  transition: all 0.3s ease;

Â  Â  Â  Â  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);

Â  Â  }

Â  Â  .trailer-link-box:hover {

Â  Â  Â  Â  background: linear-gradient(90deg, rgba(106, 91, 255, 0.4), rgba(184, 75, 255, 0.4));

Â  Â  Â  Â  transform: translateY(-3px);

Â  Â  Â  Â  box-shadow: 0 0 20px rgba(106, 91, 255, 0.5);

Â  Â  }

Â  Â  .trailer-text {

Â  Â  Â  Â  color: #ffffff;

Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  letter-spacing: 2px;

Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  text-transform: uppercase;

Â  Â  }

Â  Â  .trailer-text span {

Â  Â  Â  Â  color: #00ffbf; /* Accent color */

Â  Â  Â  Â  margin-right: 8px;

Â  Â  }

Â  Â Â 

/* ADD THIS NEW BLOCK INSIDE THE <style> TAG */

/* New badge for the playlist container itself */
.playlistContainer.new-release {
Â  Â  border-color: #38ff38 !important; /* Bright green border */
}
.playlistContainer.new-release .playlistHeader {
Â  Â  position: relative;
}

/* Style for the "NEW!!" badge */
.playlistContainer.new-release .new-badge {
Â  Â  position: absolute;
Â  Â  top: -10px;
Â  Â  right: -10px;
Â  Â  background: #38ff38; /* Bright green background */
Â  Â  color: #0a0f2e;
Â  Â  padding: 2px 8px;
Â  Â  border-radius: 4px;
Â  Â  font-size: 10px;
Â  Â  font-weight: bold;
Â  Â  letter-spacing: 0.5px;
Â  Â  transform: rotate(5deg);
Â  Â  box-shadow: 0 2px 5px rgba(0,0,0,0.4);
}

/* Styling for the playable tracks */
.track.playable-new strong {
Â  Â  color: #00ffbf; /* Flute Anthem's color for emphasis */
}

/* END OF NEW CSS BLOCK */

Â  /* ADD THIS NEW BLOCK INSIDE THE <style> TAG */

.trailer-banner {
Â  Â  width: 90%;
Â  Â  max-width: 700px;
Â  Â  margin: 0px auto 10px auto; /* Adds margin below the header and above the playlists */
Â  Â  border-radius: 12px;
Â  Â  overflow: hidden;
Â  Â  position: relative;
Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
Â  Â  background: #1a0842; /* Fallback background */
}

.trailer-banner img {
Â  Â  width: 100%;
Â  Â  height: auto;
Â  Â  display: block;
Â  Â  filter: brightness(0.7); /* Slightly darken image so text stands out */
}
/* --- UPDATED COUNTDOWN BLOCK --- */
#countdown-container {
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  align-items: center;
Â  Â  justify-content: center;
Â  Â  margin: 20px auto;
Â  Â  width: 90%;
Â  Â  max-width: 700px;
Â  Â  padding: 30px 10px;
Â  Â  background: rgba(255, 255, 255, 0.05);
Â  Â  border-radius: 15px;
Â  Â  border: 1px solid rgba(0, 212, 255, 0.3);
Â  Â  box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
}

.countdown-title {
Â  Â  font-size: 1.2rem;
Â  Â  text-transform: uppercase;
Â  Â  letter-spacing: 4px;
Â  Â  color: #00d4ff;
Â  Â  margin-bottom: 15px;
Â  Â  font-weight: bold;
Â  Â  text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
}

#countdown {
Â  Â  font-size: clamp(2rem, 8vw, 3.5rem); /* Responsive sizing */
Â  Â  font-weight: 800;
Â  Â  font-family: 'Courier New', Courier, monospace;
Â  Â  color: #ffffff;
Â  Â  letter-spacing: 2px;
Â  Â  line-height: 1;
}

.label-container {
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  width: 100%;
Â  Â  max-width: 400px;
Â  Â  margin-top: 10px;
Â  Â  opacity: 0.6;
Â  Â  font-size: 0.7rem;
Â  Â  text-transform: uppercase;
Â  Â  letter-spacing: 2px;
}

/* This helps align the labels under the numbers */
.label-container span {
Â  Â  flex: 1;
Â  Â  text-align: center;
}

.banner-caption {
Â  Â  position: absolute;
Â  Â  bottom: 0;
Â  Â  left: 0;
Â  Â  width: 100%;
Â  Â  padding: 15px 20px;
Â  Â  background: linear-gradient(to top, rgba(10, 15, 46, 0.9), rgba(10, 15, 46, 0));
Â  Â  color: white;
Â  Â  font-size: 18px;
Â  Â  font-weight: bold;
Â  Â  text-align: center;
Â  Â  letter-spacing: 1px;
}
.banner-caption span {
Â  Â  color: #38ff38; /* Uses the "NEW!!" green for the highlight */
}

/* END OF NEW CSS BLOCK */
Â Â 
/* PAGE THEME */
body {
margin: 0;
background: #0a0f2e;
color: white;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
overflow-x: hidden;
position: relative;
min-height: 100vh;
}

/* --- THE BEATING HEART BACKGROUND --- */
#bass-bg {
position: fixed;
top: 50%;
left: 50%;
width: 80vw;
height: 80vw;
max-height: 80vh;
max-width: 80vh;
transform: translate(-50%, -50%);
background: radial-gradient(circle, var(--song-color, #6a5bff) 0%, rgba(0,0,0,0) 70%);
opacity: 0;
z-index: -1;
pointer-events: none;
border-radius: 50%;
transition: background 0.5s ease;
}

/* Pulse Animation */
.pulsing #bass-bg {
animation: heartbeat 0.6s cubic-bezier(0.1, 0.7, 1.0, 0.1) infinite;
}

@keyframes heartbeat {
0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.1; }
10% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.6; }
100% { transform: translate(-50%, -50%) scale(1.6); opacity: 0; }
}

/* HEADER */
header {
display: flex;
align-items: center;
gap: 15px;
padding: 20px;
background: rgba(30, 0, 70, 0.8);
backdrop-filter: blur(8px);
border-bottom: 2px solid #6a5bff;
position: sticky;
top: 0;
z-index: 10;
}
header img { height: 50px; }
header h1 {
font-size: 28px;
font-weight: 800;
background: linear-gradient(90deg, #6a5bff, #b84bff);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
margin: 0;
letter-spacing: 1px;
}

/* CONTENT PADDING */
/* Padded to accommodate the fixed player bar at the bottom */
/* Update this block in your <style> tag */
.content {Â 
Â  Â  padding-top: 20px;Â 
Â  Â  padding-bottom: 250px; /* Increased this to push content above the player */
}

/* PLAYLIST BOX */
.playlistContainer {
width: 90%;
max-width: 700px;
margin: 20px auto;
background: rgba(255,255,255,0.03);
border-radius: 12px;
border: 1px solid rgba(255, 255, 255, 0.1);
padding: 15px;
transition: all 0.3s ease;
cursor: pointer;
}
.playlistContainer:hover {
background: rgba(255,255,255,0.07);
border-color: #6a5bff;
}

.playlistHeader { display: flex; align-items: center; gap: 15px; }
.playlistHeader img {
width: 70px; height: 70px; object-fit: cover;
border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
.playlistTitle { font-size: 20px; font-weight: bold; }

/* SONG LIST */
.songList { display: none; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px; }
.track {
display: flex; justify-content: space-between; align-items: center;
padding: 12px; border-radius: 6px; margin-bottom: 5px;
cursor: pointer; transition: background 0.2s;
}
.track:hover { background: rgba(255,255,255,0.1); }
.track strong { font-size: 14px; }
.track span { font-size: 12px; opacity: 0.7; }

/* PLAYER BAR - MODIFIED */
.player {
position: fixed;
bottom: 0; left: 0; width: 100%;
background: rgba(10, 5, 30, 0.95);
backdrop-filter: blur(10px);
/* Padding adjusted to move content up */
padding: 10px 0 50px 0;Â 
display: flex; flex-direction: column;
justify-content: center; align-items: center;
border-top: 2px solid #6a5bff;
transition: border-color 0.5s ease;
z-index: 100;
box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
}

/* Added a small bar at the bottom for visual effect/spacer */
.player::after {
content: "";
position: absolute;
bottom: 0;
left: 0;
width: 100%;
height: 40px; /* This creates the bar space */
background: rgba(10, 5, 30, 1);
z-index: 1;
}

.controls-row {
display: flex; justify-content: center; align-items: center; gap: 30px;
margin-bottom: 10px;
z-index: 2; /* Bring controls above the bottom bar */
}

button.control {
width: 55px; height: 55px; border-radius: 50%; border: none;
background: linear-gradient(135deg, #6a5bff, #b84bff);
color: white; font-size: 20px; cursor: pointer;
transition: transform 0.2s, box-shadow 0.2s;
display: flex; justify-content: center; align-items: center;
box-shadow: 0 4px 15px rgba(106, 91, 255, 0.4);
z-index: 2;
}
button.control:active { transform: scale(0.95); }
button.control:hover { transform: scale(1.1); box-shadow: 0 6px 20px rgba(106, 91, 255, 0.6); }

/* SEEK BAR / SLIDER */
.seek-container {
width: 80%;
max-width: 600px;
display: none;
align-items: center;
gap: 10px;
font-size: 12px;
color: rgba(255,255,255,0.7);
animation: fadeIn 0.5s ease;
margin-bottom: 10px; /* Adjusted spacing */
z-index: 2;
}

@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

input[type="range"] {
-webkit-appearance: none;
width: 100%; height: 4px;
background: rgba(255,255,255,0.2);
border-radius: 2px; outline: none; cursor: pointer;
}
input[type="range"]::-webkit-slider-thumb {
-webkit-appearance: none; width: 14px; height: 14px;
background: var(--song-color, #6a5bff);
border-radius: 50%; cursor: pointer;
box-shadow: 0 0 10px var(--song-color, #6a5bff);
transition: transform 0.1s;
}
input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.3); }

/* POPUP */
#popup {
/* Moved up to clear the new player bar padding */
position: fixed; bottom: 150px; right: 20px; width: 220px;
background: rgba(15, 10, 40, 0.9);
padding: 15px; border-radius: 12px;
border: 1px solid rgba(255,255,255,0.1);
display: none; z-index: 90;
backdrop-filter: blur(10px);
box-shadow: 0 8px 30px rgba(0,0,0,0.6);
animation: slideUp 0.3s ease-out;
}
@keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
#popup img { width: 100%; border-radius: 8px; margin-bottom: 10px; }

/* CLOSE BUTTON STYLE */
#closePopupBtn {
position: absolute;
top: 5px;
right: 8px;
background: none;
border: none;
color: rgba(255, 255, 255, 0.6);
font-size: 22px;
font-weight: bold;
cursor: pointer;
z-index: 100;
padding: 0;
line-height: 1;
transition: color 0.2s;
}
#closePopupBtn:hover {
color: #ff4d6d;
}

/* SCROLLING TITLE */
#popupSongName {
white-space: nowrap; overflow: hidden; width: 100%;
font-size: 14px; text-align: center; margin-bottom: 10px;
color: #fff; font-weight: 600;
}
#popupSongName span { display: inline-block; padding-left: 100%; animation: scrollText 8s linear infinite; }
@keyframes scrollText { 0% { transform: translateX(0%); } 100% { transform: translateX(-100%); } }

/* SOUNDWAVE */
.soundwave { display: flex; justify-content: center; gap: 4px; height: 15px; align-items: flex-end; }
.soundwave div { width: 3px; background: #6a5bff; animation: wave 0.8s infinite ease-in-out; }
.soundwave div:nth-child(2) { animation-delay: 0.1s; }
.soundwave div:nth-child(3) { animation-delay: 0.2s; }
.soundwave div:nth-child(4) { animation-delay: 0.3s; }
.soundwave div:nth-child(5) { animation-delay: 0.4s; }
@keyframes wave { 0%, 100% { height: 3px; } 50% { height: 15px; } }
.paused div { animation-play-state: paused; height: 3px; }

/* TRENDING SECTION STYLES - MODIFIED FOR HORIZONTAL SCROLL */
.trendingSection {
width: 90%;
max-width: 700px;
margin: 40px auto 20px auto;
padding: 15px 0; /* Adjusted padding for internal spacing */
border-radius: 12px;
background: rgba(255,255,255,0.03);
border: 1px solid rgba(255, 255, 255, 0.1);
}
.trendingSection h2 {
font-size: 24px;
border-bottom: 2px solid #b84bff;
padding: 0 15px 5px 15px; /* Added horizontal padding to title */
margin-top: 0;
color: #b84bff;
}
.trendingList {
list-style: none;
padding: 10px 15px;
margin: 0;
display: flex; /* Key for horizontal layout */
overflow-x: auto; /* Enable horizontal scrolling */
gap: 15px;
}
/* Style for horizontal scrollbar (optional, may vary by browser) */
.trendingList::-webkit-scrollbar { height: 6px; }
.trendingList::-webkit-scrollbar-thumb { background: rgba(106, 91, 255, 0.4); border-radius: 3px; }
.trendingList::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }

.trendingItem {
/* Set item width for visibility in horizontal scroll */
flex: 0 0 150px;Â 
display: flex;
flex-direction: column;
align-items: flex-start;
padding: 10px;
border-radius: 8px;
transition: background 0.2s, transform 0.2s;
cursor: pointer;
}
.trendingItem:hover {Â 
background: rgba(255,255,255,0.07);Â 
transform: translateY(-2px);
}
.trendingRank {
font-size: 14px;
font-weight: bold;
color: #6a5bff;
margin-bottom: 5px;
}
.trendingCover {
width: 100%;
height: 150px;
border-radius: 6px;
object-fit: cover;
margin-bottom: 8px;
box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
.trendingInfo {
flex-grow: 1;
width: 100%;
}
.trendingTitle {
font-size: 14px;
font-weight: bold;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}
.trendingViews {
font-size: 11px;
opacity: 0.7;
margin-top: 3px;
}

</style>
</head>
<body class="">
Â  Â Â 

<div id="bass-bg"></div>

<header>
<img src="logo.png" alt="Logo" onerror="this.style.display='none'">
<h1>Vibe with Jishnu</h1>
</header>

<div class="trailer-banner">
Â  Â  <img src="tp.jpg" alt="LOT-III Trailer">
Â  Â  <div class="banner-caption">
Â  Â  Â  Â  <span>LOT-III Trailer out now!!</span>
Â  Â  </div>
</div>
Â  Â Â 
<a href="https://drive.google.com/file/d/1sl3XzH4e5rl8wIvRxTHvxDzpU0vTlZPv/view?usp=drivesdk" target="_blank" class="trailer-link-box">

Â  Â  <div class="trailer-text"><span>â–¶</span> LOT-III OFFICIAL TRAILER</div>

</a>
<div id="countdown-container">
Â  Â  <div class="countdown-title">LOT-III Release In</div>
Â  Â  <div id="countdown">00:00:00:00</div>
Â  Â  <div class="label-container">
Â  Â  Â  Â  <span>Days</span>
Â  Â  Â  Â  <span>Hrs</span>
Â  Â  Â  Â  <span>Min</span>
Â  Â  Â  Â  <span>Sec</span>
Â  Â  </div>
</div>


<div class="playlistContainer new-release">
Â  Â  <div class="playlistHeader" onclick="toggleList('list1')">
Â  Â  Â  Â  <span class="new-badge">NEW!!</span>
Â  Â  Â  Â  <img src="Poster.jpg" alt="LOT-III" onerror="this.src='https://via.placeholder.com/80/6a5bff/fff?text=Music'">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="playlistTitle">LOT-III OST</div>
Â  Â  Â  Â  Â  Â  <div style="font-size:12px; opacity:0.6">Original Sound Track</div>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div id="list1" class="songList"></div>
</div>

<div class="playlistContainer new-release">
Â  Â  <div class="playlistHeader" onclick="toggleList('list4')">
Â  Â  Â  Â  <span class="new-badge">NEW!!</span>
Â  Â  Â  Â  <img src="Poster.jpg" alt="LOT-III Singles" onerror="this.src='https://via.placeholder.com/80/6a5bff/fff?text=Music'">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="playlistTitle">LOT-III Singles</div>
Â  Â  Â  Â  Â  Â  <div style="font-size:12px; opacity:0.6">Latest Releases</div>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div id="list4" class="songList"></div>
</div>

<div class="playlistContainer">
Â  Â  <div class="playlistHeader" onclick="toggleList('list2')">
Â  Â  Â  Â  <img src="Poster2.jpeg" alt="50 Shades" onerror="this.src='https://via.placeholder.com/80/6a5bff/fff?text=Music'">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="playlistTitle">50 Shades of Jishnu Anthem</div>
Â  Â  Â  Â  Â  Â  <div style="font-size:12px; opacity:0.6">Song of the century</div>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div id="list2" class="songList"></div>
</div>

<div class="playlistContainer">
Â  Â  <div class="playlistHeader" onclick="toggleList('list3')">
Â  Â  Â  Â  <img src="Poster3.jpeg" alt="Hits" onerror="this.src='https://via.placeholder.com/80/6a5bff/fff?text=Music'">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="playlistTitle">Blockbuster Hits</div>
Â  Â  Â  Â  Â  Â  <div style="font-size:12px; opacity:0.6">Fan Favorites</div>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div id="list3" class="songList"></div>
</div>

<div class="trendingSection">
<h2>Trending Songs ğŸ”¥</h2>
<ul class="trendingList" id="trendingList">
</ul>
</div>
</div>

<div id="popup">
<button id="closePopupBtn" onclick="closePopup()">Ã—</button>

<img id="popupImg" src="" onerror="this.style.display='none'">
<div id="popupSongName"></div>
<div class="soundwave" id="soundwave">
<div></div><div></div><div></div><div></div><div></div>
</div>
</div>
<br><br><br><br><br><br><br><br><br><br>
<div class="player">
<div class="controls-row">
<button class="control" onclick="prevSong()">â®</button>
<button class="control" onclick="togglePlay()">
<span id="playPauseIcon" style="margin-left:2px;">â–¶</span>
</button>
<button class="control" onclick="nextSong()">â­</button>
</div>

<div class="seek-container" id="seekContainer">
<span id="currTimeText">0:00</span>
<input type="range" id="seekSlider" min="0" max="100" value="0">
<span id="durTimeText">0:00</span>
</div>
</div>

<audio id="audio"></audio>

<script type="module">
Â  Â  // --- FIREBASE INITIALIZATION (Consolidated) ---
Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
Â  Â  import { getFirestore, doc, updateDoc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

Â  Â  const firebaseConfig = {
Â  Â  Â  Â  apiKey: "AIzaSyDohsquOam8YQXz7tqrWOG5f4pcXh-CnBM",
Â  Â  Â  Â  authDomain: "weapon-fanpage.firebaseapp.com",
Â  Â  Â  Â  projectId: "weapon-fanpage",
Â  Â  Â  Â  storageBucket: "weapon-fanpage.firebasestorage.app",
Â  Â  Â  Â  messagingSenderId: "124549409527",
Â  Â  Â  Â  appId: "1:124549409527:web:85657a1d41c8950f7601f2"
Â  Â  };

Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  const db = getFirestore(app);

Â  Â  // Global access for the functions used in inline HTML onclicks
Â  Â  window.db = db;
Â  Â  window.doc = doc;
Â  Â  window.updateDoc = updateDoc;
Â  Â  window.getDoc = getDoc;

Â  Â  // --- COUNTDOWN LOGIC ---
Â  Â  function updateCountdown() {
Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  const targetDate = new Date(`Jan 21, 2026 00:00:00`).getTime();
Â  Â  Â  Â  const expiryDate = new Date(`Jan 22, 2026 00:00:00`).getTime();
Â  Â  Â  Â  const currentTime = now.getTime();
Â  Â  Â  Â  const distance = targetDate - currentTime;
Â  Â  Â  Â  const container = document.getElementById("countdown-container");

Â  Â  Â  Â  if (currentTime >= expiryDate) {
Â  Â  Â  Â  Â  Â  if(container) container.style.display = "none";
Â  Â  Â  Â  Â  Â  return;Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  if (distance <= 0) {
Â  Â  Â  Â  Â  Â  document.getElementById("countdown").innerHTML = "Happy Birthday Jishnu";
Â  Â  Â  Â  Â  Â  document.getElementById("countdown").style.fontSize = "1.8rem";
Â  Â  Â  Â  Â  Â  document.querySelector(".label-container").style.display = "none";
Â  Â  Â  Â  Â  Â  document.querySelector(".countdown-title").innerHTML = "Celebration Time!";
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const days = Math.floor(distance / (1000 * 60 * 60 * 24));
Â  Â  Â  Â  const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
Â  Â  Â  Â  const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
Â  Â  Â  Â  const seconds = Math.floor((distance % (1000 * 60)) / 1000);
Â  Â  Â  Â  const format = (num) => num.toString().padStart(2, '0');

Â  Â  Â  Â  document.getElementById("countdown").innerHTML = `${days}:${format(hours)}:${format(minutes)}:${format(seconds)}`;
Â  Â  }

Â  Â  setInterval(updateCountdown, 1000);
Â  Â  updateCountdown();
</script>

<script>
/* 1. DEFINE DATA FIRST */
const artists = {
    "Intermission(LOT-III)": "Jishnu, G.R.Adhavh",
    "Saavachuruven unna(LOT-III)": "Jishnu, G.R.Adhavh, Sanjai",
    "Sivagasi's Daaha(LOT-III)": "G.R.Adhavh, Shreyas",
    "Sivagasi's Dahaa x Saavachuruven unna(LOT-III)": "G.R.Adhavh, Shreyas, Jishnu",
    "The namechange(LOT-III)": "Kavinraaj, G.R.Adhavh",
    "Flute anthem(LOT-III)": "G.R.Adhavh",
    "Item number 1(LOT-III)": "G.R.Adhavh",
    "Saavadi Saravedi(LOT-III)": "Kavinraaj, G.R.Adhavh",
    "Anugundu Abhishek(LOT-III)": "G.R.Adhavh",
    "DSK on the move(LOT-III)": "G.R.Adhavh",
    "Hyper Harishankar(LOT-III)": "G.R.Adhavh",
    "Jishnu Anthem Reprise(LOT-III)": "G.R.Adhavh",
    "The fight(LOT-III)": "G.R.Adhavh",
    "King in the universe(LOT-III)": "G.R.Adhavh",
    "King vs Harold(LOT-III)": "G.R.Adhavh",
    "LOT-III teaser concert(LOT-III)": "G.R.Adhavh",
    "LOT-III Theme(LOT-III)": "G.R.Adhavh",
    "Vadakku Sadhuram il Jishnu(LOT-III)": "G.R.Adhavh",
    "default": "G.R.Adhavh"
};

const songAnimations = {
    "Intermission(LOT-III)": "#ff4d6d",
    "Saavachuruven unna(LOT-III)": "#4dd6ff",
    "Sivagasi's Daaha(LOT-III)": "#ffa600",
    "The namechange(LOT-III)": "#bb6bff",
    "Flute anthem(LOT-III)": "#00ffbf",
    "Item number 1(LOT-III)": "#ffd700",      
    "Saavadi Saravedi(LOT-III)": "#ff4500", 
    "Jishnu Anthem": "#00ff88",
    "default": "#6a5bff"
};

const playlists = {
    list1: [
        "Anugundu Abhishek.mp3", "DSK on the move.mp3", "Hyper Harishankar.mp3",
        "Intermission.mp3", "Jishnu Anthem Reprise.mp3", "The fight.mp3",
        "King in the Universe.mp3", "King vs Harold.mp3", "LOT-III teaser concert.mp3",
        "LOT-III Theme.mp3", "Saavachuruven unna.mp3", "Sivagasi's Daaha.mp3",
        "Sivagasis Daaha x Saavachuruven unna.mp3",
        "The namechange.mp3", "Vadakku Sadhuram il Jishnu.mp3", "Flute anthem.mp3"
    ],
    list4: [ "Item number 1.mp3", "Saavadi Saravedi.mp3" ],
    list2: [ "Jishnu Anthem.mp3", "Jishnu anthem Thalapathy Vijay vocal.mp3", "Jishnu Anthem slowed and reverbed.mp3", "Jishnu Anthem Karoke.mp3" ],
    list3: [ "Harishankar ku irukka.mp3", "Happy Birthday Megharajan.mp3", "Bomb.mp3", "Sanjai.mp3" ]
};

/* 2. DEFINE UTILITIES */
let currentList = "list1";
let currentIndex = 0;

function simplifyDisplayName(displayName) {
    return displayName.replace(/[()]/g, '').replace(/[^a-zA-Z0-9]/g, '');
}

function formatViews(num) {
    if (num === undefined) return "0 views";
    if (num >= 1000) return (num / 1000).toFixed(1) + 'K views';
    return num + ' views';
}

/* 3. DEFINE PLAYER FUNCTIONS */
function applySongTheme(color){
    document.documentElement.style.setProperty('--song-color', color);
    document.body.style.background = `radial-gradient(circle at center, ${color}22 0%, #0a0f2e 100%)`;
    document.querySelectorAll("#soundwave div").forEach(w => w.style.background = color);
}

function showPopup(name, artist, list) {
    document.getElementById("popup").style.display = "block";
    document.getElementById("popupSongName").innerHTML = `<span>${name} â€” ${artist}</span>`;
    let img = document.getElementById("popupImg");
    if (list === 'list1' || list === 'list4') img.src = "Poster.jpg";
    else if (list === 'list2') img.src = "Poster2.jpeg";
    else {
        if (name.includes("Bomb") || name.includes("Sanjai")) img.src = "poster4.png";
        else if (name.includes("Harishankar")) img.src = "Poster3.jpeg";
        else if (name.includes("Happy Birthday")) img.src = "poster3.png";
        else img.src = "Poster3.jpeg";
    }
}

function playSong(list, index) {
    currentList = list;
    currentIndex = index;
    const fileName = playlists[list][index];
    const audio = document.getElementById("audio");
    audio.src = fileName;
    audio.play();

    let clean = fileName.replace(".mp3", "");
    let displayName = clean;
    if (list === 'list1' || list === 'list4') {
        if (clean === "Sivagasis Daaha x Saavachuruven unna") displayName = "Sivagasi's Dahaa x Saavachuruven unna(LOT-III)";
        else if (clean === "Sivagasi's Daaha") displayName = "Sivagasi's Daaha(LOT-III)";
        else displayName = clean + "(LOT-III)";
    }

    document.getElementById("playPauseIcon").innerText = "â¸";
    document.getElementById("seekContainer").style.display = "flex";
    document.body.classList.add("pulsing");
    
    incrementView(displayName);
    showPopup(displayName, artists[displayName] || "G.R.Adhavh", list);
    applySongTheme(songAnimations[displayName] || "#6a5bff");
}

/* 4. TRENDING LOGIC (Using defined data and functions) */
const allSongsForTrending = Object.keys(artists).filter(key => key !== 'default').map(displayName => {
    let cover = "Poster.jpg";
    if (displayName.includes("Jishnu Anthem")) cover = "Poster2.jpeg";
    if (displayName.includes("Bomb") || displayName.includes("Sanjai")) cover = "poster4.png";
    if (displayName.includes("Harishankar")) cover = "Poster3.jpeg";
    if (displayName.includes("Happy Birthday")) cover = "poster3.png";
    return { name: displayName, dbName: simplifyDisplayName(displayName), cover: cover };
});

function renderTrendingUI(viewsMap) {
    const listElem = document.getElementById("trendingList");
    if (!listElem) return;
    listElem.innerHTML = ''; 
    const sortedTrending = allSongsForTrending.slice().sort((a, b) => (viewsMap[b.dbName] || 0) - (viewsMap[a.dbName] || 0));
    sortedTrending.slice(0, 3).forEach((song, idx) => {
        const item = document.createElement("li");
        item.className = "trendingItem";
        let playlistId = null, playlistIndex = -1;
        for (const lid in playlists) {
            playlistIndex = playlists[lid].findIndex(f => {
                let c = f.replace(".mp3", "");
                if (lid === 'list1' || lid === 'list4') {
                   if (c === "Sivagasis Daaha x Saavachuruven unna") c = "Sivagasi's Dahaa x Saavachuruven unna(LOT-III)";
                   else if (c === "Sivagasi's Daaha") c = "Sivagasi's Daaha(LOT-III)";
                   else c = c + "(LOT-III)";
                }
                return c === song.name;
            });
            if (playlistIndex !== -1) { playlistId = lid; break; }
        }
        item.innerHTML = `<div class="trendingRank">#${idx+1}</div><img class="trendingCover" src="${song.cover}"><div class="trendingInfo"><div class="trendingTitle">${song.name}</div><div class="trendingViews">${artists[song.name]} â€¢ ${formatViews(viewsMap[song.dbName])}</div></div>`;
        item.onclick = () => { if (playlistId) playSong(playlistId, playlistIndex); };
        listElem.appendChild(item);
    });
}

/* 5. REST OF THE UI & FIREBASE CODE */
function toggleList(id) {
    const el = document.getElementById(id);
    const isVisible = el.style.display === "block";
    document.querySelectorAll('.songList').forEach(l => l.style.display = "none");
    el.style.display = isVisible ? "none" : "block";
}

function setupPlaylists() {
    for (let id in playlists) {
        let listElem = document.getElementById(id);
        if (!listElem) continue;
        playlists[id].forEach((fileName, idx) => {
            let clean = fileName.replace(".mp3", "");
            let displayName = clean;
            if (id === 'list1' || id === 'list4') {
                if (clean === "Sivagasis Daaha x Saavachuruven unna") displayName = "Sivagasi's Dahaa x Saavachuruven unna(LOT-III)";
                else if (clean === "Sivagasi's Daaha") displayName = "Sivagasi's Daaha(LOT-III)";
                else displayName = clean + "(LOT-III)";
            }
            let div = document.createElement("div");
            div.className = "track";
            if (id === 'list1' || id === 'list4') div.classList.add("playable-new");
            div.innerHTML = `<div><strong>${displayName}</strong><br><span>${artists[displayName] || "G.R.Adhavh"}</span></div><span>â–¶</span>`;
            div.onclick = () => playSong(id, idx);
            listElem.appendChild(div);
        });
    }
}

async function incrementView(displayName) {
    if (!window.db) return;
    const dbName = simplifyDisplayName(displayName);
    const docRef = window.doc(window.db, "all_songs_views", "all_song_data");
    try {
        const docSnap = await window.getDoc(docRef);
        if (docSnap.exists()) {
            const data = docSnap.data();
            const viewsMap = data.views_map || {};
            viewsMap[dbName] = (viewsMap[dbName] || 0) + 1;
            await window.updateDoc(docRef, { views_map: viewsMap });
            renderTrendingUI(viewsMap);
        }
    } catch (e) { console.error(e); }
}

async function fetchAndRenderTrending() {
    if (!window.db) { setTimeout(fetchAndRenderTrending, 100); return; }
    try {
        const docRef = window.doc(window.db, "all_songs_views", "all_song_data");
        const docSnap = await window.getDoc(docRef);
        if (docSnap.exists()) renderTrendingUI(docSnap.data().views_map || {});
    } catch (e) { console.error(e); }
}

/* PLAYER CONTROLS & EVENT LISTENERS */

function togglePlay() {
    const audio = document.getElementById("audio");
    const icon = document.getElementById("playPauseIcon");
    if (!audio.src) return;

    if (audio.paused) {
        audio.play();
        icon.innerText = "â¸";
        document.body.classList.add("pulsing");
    } else {
        audio.pause();
        icon.innerText = "â–¶";
        document.body.classList.remove("pulsing");
    }
}

function nextSong() {
    if (!currentList) return;
    currentIndex = (currentIndex + 1) % playlists[currentList].length;
    playSong(currentList, currentIndex);
}

function prevSong() {
    if (!currentList) return;
    currentIndex = (currentIndex - 1 + playlists[currentList].length) % playlists[currentList].length;
    playSong(currentList, currentIndex);
}

function closePopup() {
    document.getElementById("popup").style.display = "none";
}

/* AUDIO ELEMENT LOGIC */
const audio = document.getElementById("audio");
const seekSlider = document.getElementById("seekSlider");

// Update progress bar as song plays
audio.addEventListener('timeupdate', () => {
    if (audio.duration) {
        const pct = (audio.currentTime / audio.duration) * 100;
        seekSlider.value = pct;
        document.getElementById("currTimeText").innerText = formatTime(audio.currentTime);
        document.getElementById("durTimeText").innerText = formatTime(audio.duration);
    }
});

// Seek song when slider is moved
seekSlider.addEventListener('input', () => {
    if (audio.duration) {
        audio.currentTime = (seekSlider.value / 100) * audio.duration;
    }
});

// Auto-play next song when current one ends
audio.addEventListener('ended', nextSong);

function formatTime(s) {
    if(isNaN(s)) return "0:00";
    let m = Math.floor(s/60), sec = Math.floor(s%60);
    return m + ":" + (sec < 10 ? "0" + sec : sec);
}

window.onload = () => {
    setupPlaylists();
    fetchAndRenderTrending();
};
</script>
</body>
</html>
