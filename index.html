<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vibe with Jishnu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0a0f2e"> 

<style>
/* PAGE THEME */
body {
    margin: 0;
    background: #0a0f2e;
    color: white;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow-x: hidden;
    position: relative;
    min-height: 100vh;
}

/* --- THE BEATING HEART BACKGROUND --- */
#bass-bg {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 80vw;
    height: 80vw;
    max-height: 80vh;
    max-width: 80vh;
    transform: translate(-50%, -50%);
    background: radial-gradient(circle, var(--song-color, #6a5bff) 0%, rgba(0,0,0,0) 70%);
    opacity: 0;
    z-index: -1;
    pointer-events: none;
    border-radius: 50%;
    transition: background 0.5s ease;
}

/* Pulse Animation */
.pulsing #bass-bg {
    animation: heartbeat 0.6s cubic-bezier(0.1, 0.7, 1.0, 0.1) infinite;
}

@keyframes heartbeat {
    0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.1; }
    10% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.6; }
    100% { transform: translate(-50%, -50%) scale(1.6); opacity: 0; }
}

/* HEADER */
header {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 20px;
    background: rgba(30, 0, 70, 0.8);
    backdrop-filter: blur(8px);
    border-bottom: 2px solid #6a5bff;
    position: sticky;
    top: 0;
    z-index: 10;
}
header img { height: 50px; }
header h1 {
    font-size: 28px;
    font-weight: 800;
    background: linear-gradient(90deg, #6a5bff, #b84bff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin: 0;
    letter-spacing: 1px;
}

/* CONTENT PADDING */
.content { padding-bottom: 160px; }

/* PLAYLIST BOX */
.playlistContainer {
    width: 90%;
    max-width: 700px;
    margin: 20px auto;
    background: rgba(255,255,255,0.03);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 15px;
    transition: all 0.3s ease;
    cursor: pointer;
}
.playlistContainer:hover {
    background: rgba(255,255,255,0.07);
    border-color: #6a5bff;
}

.playlistHeader { display: flex; align-items: center; gap: 15px; }
.playlistHeader img {
    width: 70px; height: 70px; object-fit: cover;
    border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
.playlistTitle { font-size: 20px; font-weight: bold; }

/* SONG LIST */
.songList { display: none; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px; }
.track {
    display: flex; justify-content: space-between; align-items: center;
    padding: 12px; border-radius: 6px; margin-bottom: 5px;
    cursor: pointer; transition: background 0.2s;
}
.track:hover { background: rgba(255,255,255,0.1); }
.track strong { font-size: 14px; }
.track span { font-size: 12px; opacity: 0.7; }

/* PLAYER BAR */
.player {
    position: fixed;
    bottom: 0; left: 0; width: 100%;
    background: rgba(10, 5, 30, 0.95);
    backdrop-filter: blur(10px);
    padding: 15px 0;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    border-top: 2px solid #6a5bff;
    transition: border-color 0.5s ease;
    z-index: 100;
    box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
}

.controls-row {
    display: flex; justify-content: center; align-items: center; gap: 30px;
    margin-bottom: 10px;
}

button.control {
    width: 55px; height: 55px; border-radius: 50%; border: none;
    background: linear-gradient(135deg, #6a5bff, #b84bff);
    color: white; font-size: 20px; cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    display: flex; justify-content: center; align-items: center;
    box-shadow: 0 4px 15px rgba(106, 91, 255, 0.4);
}
button.control:active { transform: scale(0.95); }
button.control:hover { transform: scale(1.1); box-shadow: 0 6px 20px rgba(106, 91, 255, 0.6); }

/* SEEK BAR / SLIDER */
.seek-container {
    width: 80%;
    max-width: 600px;
    display: none;
    align-items: center;
    gap: 10px;
    font-size: 12px;
    color: rgba(255,255,255,0.7);
    animation: fadeIn 0.5s ease;
}

@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

input[type="range"] {
    -webkit-appearance: none;
    width: 100%; height: 4px;
    background: rgba(255,255,255,0.2);
    border-radius: 2px; outline: none; cursor: pointer;
}
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none; width: 14px; height: 14px;
    background: var(--song-color, #6a5bff);
    border-radius: 50%; cursor: pointer;
    box-shadow: 0 0 10px var(--song-color, #6a5bff);
    transition: transform 0.1s;
}
input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.3); }

/* POPUP */
#popup {
    position: fixed; bottom: 130px; right: 20px; width: 220px;
    background: rgba(15, 10, 40, 0.9);
    padding: 15px; border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.1);
    display: none; z-index: 90;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    animation: slideUp 0.3s ease-out;
}
@keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
#popup img { width: 100%; border-radius: 8px; margin-bottom: 10px; }

/* SCROLLING TITLE */
#popupSongName {
    white-space: nowrap; overflow: hidden; width: 100%;
    font-size: 14px; text-align: center; margin-bottom: 10px;
    color: #fff; font-weight: 600;
}
#popupSongName span { display: inline-block; padding-left: 100%; animation: scrollText 8s linear infinite; }
@keyframes scrollText { 0% { transform: translateX(0%); } 100% { transform: translateX(-100%); } }

/* SOUNDWAVE */
.soundwave { display: flex; justify-content: center; gap: 4px; height: 15px; align-items: flex-end; }
.soundwave div { width: 3px; background: #6a5bff; animation: wave 0.8s infinite ease-in-out; }
.soundwave div:nth-child(2) { animation-delay: 0.1s; }
.soundwave div:nth-child(3) { animation-delay: 0.2s; }
.soundwave div:nth-child(4) { animation-delay: 0.3s; }
.soundwave div:nth-child(5) { animation-delay: 0.4s; }
@keyframes wave { 0%, 100% { height: 3px; } 50% { height: 15px; } }
.paused div { animation-play-state: paused; height: 3px; }

</style>
</head>
<body class="">

<div id="bass-bg"></div>

<header>
    <img src="logo.png" alt="Logo" onerror="this.style.display='none'">
    <h1>Vibe with Jishnu</h1>
</header>

<div class="content">
    <div class="playlistContainer">
        <div class="playlistHeader" onclick="toggleList('list1')">
            <img src="Poster.jpg" alt="LOT-III" onerror="this.src='https://via.placeholder.com/80/6a5bff/fff?text=Music'">
            <div>
                <div class="playlistTitle">LOT-III OST</div>
                <div style="font-size:12px; opacity:0.6">Original Sound Track</div>
            </div>
        </div>
        <div id="list1" class="songList"></div>
    </div>

    <div class="playlistContainer">
        <div class="playlistHeader" onclick="toggleList('list2')">
            <img src="Poster2.jpeg" alt="50 Shades" onerror="this.src='https://via.placeholder.com/80/6a5bff/fff?text=Music'">
            <div>
                <div class="playlistTitle">50 Shades of Jishnu Anthem</div>
                <div style="font-size:12px; opacity:0.6">Song of the century</div>
            </div>
        </div>
        <div id="list2" class="songList"></div>
    </div>

    <div class="playlistContainer">
        <div class="playlistHeader" onclick="toggleList('list3')">
            <img src="Poster3.jpeg" alt="Hits" onerror="this.src='https://via.placeholder.com/80/6a5bff/fff?text=Music'">
            <div>
                <div class="playlistTitle">Blockbuster Hits</div>
                <div style="font-size:12px; opacity:0.6">Fan Favorites</div>
            </div>
        </div>
        <div id="list3" class="songList"></div>
    </div>
</div>

<div id="popup">
    <img id="popupImg" src="" onerror="this.style.display='none'">
    <div id="popupSongName"></div>
    <div class="soundwave" id="soundwave">
        <div></div><div></div><div></div><div></div><div></div>
    </div>
</div>

<div class="player">
    <div class="controls-row">
        <button class="control" onclick="prevSong()">⏮</button>
        <button class="control" onclick="togglePlay()">
            <span id="playPauseIcon" style="margin-left:2px;">▶</span>
        </button>
        <button class="control" onclick="nextSong()">⏭</button>
    </div>
    
    <div class="seek-container" id="seekContainer">
        <span id="currTimeText">0:00</span>
        <input type="range" id="seekSlider" min="0" max="100" value="0">
        <span id="durTimeText">0:00</span>
    </div>
</div>

<audio id="audio"></audio>

<script>
/* DATA */
const artists = {
    // LOT-III
    "Intermission(LOT-III)": "Jishnu, G.R.Adhavh",
    "Saavachuruven unna(LOT-III)": "Jishnu, G.R.Adhavh, Sanjai",
    "Sivagasi's Daaha(LOT-III)": "G.R.Adhavh, Shreyas",
    "The namechange(LOT-III)": "Kavinraaj, G.R.Adhavh",
    
    // 50 SHADES
    "Jishnu Anthem": "G.R.Adhavh",
    "Jishnu Anthem speaker change version": "G.R.Adhavh",
    "Jishnu Anthem slowed and reverbed": "G.R.Adhavh",
    "Jishnu Anthem Karoke": "G.R.Adhavh",
    
    // HITS & NEW SONGS
    "Harishankar ku irukka": "Kavinraaj, G.R.Adhavh",
    "Happy Birthday Megharajan": "G.R.Adhavh",
    
    // UPDATED: Use Display Names as keys
    "Bomb (Endhu 1cm)": "Kavinraaj, Kaliyappan, G.R.Adhavh",
    "Sanjai's room (Endhu 1cm)": "Shreyas, G.R.Adhavh",
    
    "default": "G.R.Adhavh"
};

const songAnimations = {
    // LOT-III Colors
    "Intermission(LOT-III)": "#ff4d6d",
    "Saavachuruven unna(LOT-III)": "#4dd6ff",
    "Sivagasi's Daaha(LOT-III)": "#ffa600",
    "The namechange(LOT-III)": "#bb6bff",
    
    // 50 Shades Colors
    "Jishnu Anthem": "#00ff88",
    "Jishnu Anthem speaker change version": "#ccff00",
    "Jishnu Anthem slowed and reverbed": "#00ccff",
    "Jishnu Anthem Karoke": "#ffffff",
    
    // Hits & New Colors
    "Harishankar ku irukka": "#ff0055",
    "Happy Birthday Megharajan": "#a600ff",
    
    // UPDATED: Use Display Names as keys
    "Bomb (Endhu 1cm)": "#ff3300",          
    "Sanjai's room (Endhu 1cm)": "#ff00cc",

    "default": "#6a5bff"
};

const playlists = {
    list1: [
        "Anugundu Abhishek(LOT-III).mp3",
        "DSK on the move(LOT-III).mp3",
        "Hyper Harishankar(LOT-III).mp3",
        "Intermission(LOT-III).mp3",
        "Jishnu Anthem Reprise(LOT-III).mp3",
        "Jishnu vs Annas(LOT-III).mp3",
        "King vs Harold(LOT-III).mp3",
        "LOT-III teaser concert(LOT-III).mp3",
        "LOT-III Theme(LOT-III).mp3",
        "Saavachuruven unna(LOT-III).mp3",
        "Sivagasi's Daaha(LOT-III).mp3",
        "The namechange(LOT-III).mp3",
        "Vadakku Sadhuram il Jishnu(LOT-III).mp3"
    ],
    list2: [
        "Jishnu Anthem.mp3",
        "Jishnu Anthem speaker change version.mp3",
        "Jishnu Anthem slowed and reverbed.mp3",
        "Jishnu Anthem Karoke.mp3"
    ],
    list3: [
        "Harishankar ku irukka.mp3", 
        "Happy Birthday Megharajan.mp3",
        // UPDATED: Use simple file names
        "Bomb.mp3", 
        "Sanjai.mp3" 
    ]
};

/* UTILS */
function getArtist(song) { return artists[song.replace(".mp3","")] || artists["default"]; }
function getColor(song) { return songAnimations[song.replace(".mp3","")] || songAnimations["default"]; }

/* UI GENERATION */
for(let id in playlists){
    if(id === 'list1') playlists[id].sort();
    
    let listElem = document.getElementById(id);

    playlists[id].forEach((song, idx)=>{
        let clean = song.replace(".mp3","");
        
        // --- DISPLAY NAME LOGIC ---
        let displayName = clean;
        
        if(clean === "Harishankar ku irukka") displayName = "Harishankar ku irukka?";
        // NEW: Map simple file -> Fancy Display with Parentheses
        if(clean === "Bomb") displayName = "Bomb (Endhu 1cm)";
        if(clean === "Sanjai") displayName = "Sanjai's room (Endhu 1cm)";
        
        // Use displayName to lookup Artist
        let artist = getArtist(displayName) || getArtist(clean);

        let div = document.createElement("div");
        div.className="track";
        div.innerHTML = `<div><strong>${displayName}</strong><br><span>${artist}</span></div><span style="font-size:10px;">▶</span>`;
        div.onclick = (e) => { e.stopPropagation(); playSong(id, idx); };
        listElem.appendChild(div);
    });
}

function toggleList(id){
    document.querySelectorAll('.songList').forEach(l => { if(l.id!==id) l.style.display="none"; });
    let el = document.getElementById(id);
    el.style.display = (el.style.display === "block") ? "none" : "block";
}

/* PLAYER LOGIC */
let currentList = null, currentIndex = 0;
let audio = document.getElementById("audio");
let seekSlider = document.getElementById("seekSlider");
let currTimeText = document.getElementById("currTimeText");
let durTimeText = document.getElementById("durTimeText");

audio.addEventListener('ended', nextSong);

audio.addEventListener('timeupdate', () => {
    if(audio.duration){
        let pct = (audio.currentTime / audio.duration) * 100;
        seekSlider.value = pct;
        currTimeText.innerText = formatTime(audio.currentTime);
        durTimeText.innerText = formatTime(audio.duration);
    }
});

seekSlider.addEventListener('input', () => {
    if(audio.duration){
        let seekTime = (seekSlider.value / 100) * audio.duration;
        audio.currentTime = seekTime;
    }
});

function playSong(list, index){
    currentList = list;
    currentIndex = index;

    let song = playlists[list][index];
    let clean = song.replace(".mp3","");
    
    // --- DISPLAY NAME LOGIC FOR PLAYER ---
    let displayName = clean;
    if(clean === "Harishankar ku irukka") displayName = "Harishankar ku irukka?";
    if(clean === "Bomb") displayName = "Bomb (Endhu 1cm)";
    if(clean === "Sanjai") displayName = "Sanjai's room (Endhu 1cm)";

    let artist = getArtist(displayName) || getArtist(clean);
    let color = getColor(displayName) || getColor(clean);

    audio.src = song;
    let playPromise = audio.play();
    if (playPromise !== undefined) {
        playPromise.then(_ => startVisuals()).catch(e => { console.error(e); stopVisuals(); });
    }

    document.getElementById("seekContainer").style.display = "flex";

    showPopup(displayName, artist, list);
    applySongTheme(color);
    animatePlayButton();
}

function togglePlay(){
    if(audio.paused){ audio.play().then(()=>startVisuals()); }
    else { audio.pause(); stopVisuals(); }
    animatePlayButton();
    toggleWave();
}

function prevSong(){
    if(!currentList) return;
    currentIndex = (currentIndex - 1 + playlists[currentList].length) % playlists[currentList].length;
    playSong(currentList, currentIndex);
}

function nextSong(){
    if(!currentList) return;
    currentIndex = (currentIndex + 1) % playlists[currentList].length;
    playSong(currentList, currentIndex);
}

/* VISUALS */
function startVisuals() { document.body.classList.add("pulsing"); }
function stopVisuals() { document.body.classList.remove("pulsing"); }

function applySongTheme(color){
    document.documentElement.style.setProperty('--song-color', color);
    document.body.style.background = `radial-gradient(circle at center, ${color}22 0%, #0a0f2e 100%)`;
    document.querySelectorAll("#soundwave div").forEach(w => w.style.background = color);
    document.querySelector(".player").style.borderColor = color;
}

function showPopup(songName, artist, list){
    let popup = document.getElementById("popup");
    popup.style.display = "block";
    document.getElementById("popupSongName").innerHTML = `<span>${songName} — ${artist}</span>`;
    
    let img = document.getElementById("popupImg");
    img.style.display="block";
    
    // --- IMAGE LOGIC (FIXED CAPITALIZATION) ---
    if(list === "list1") {
        img.src = "Poster.jpg";
    }
    else if(list === "list2") {
        img.src = "Poster2.jpeg";
    }
    else if(list === "list3") {
        // Dynamic images for Blockbuster Hits
        // Match the DISPLAY names or simple names
        if(songName.includes("Bomb") || songName.includes("Sanjai")) {
            img.src = "poster4.png"; // Lowercase p
        } 
        else if (songName.includes("Harishankar")) {
            img.src = "Poster3.jpeg"; // Capital P
        }
        else if (songName.includes("Happy Birthday")) {
            img.src = "poster3.png"; // Lowercase p
        }
        else {
            img.src = "Poster3.jpeg";
        }
    }
    else {
        img.src = "Poster.jpg";
    }
    
    toggleWave();
}

function animatePlayButton(){
    let icon = document.getElementById("playPauseIcon");
    icon.innerText = audio.paused ? "▶" : "⏸";
    icon.style.marginLeft = audio.paused ? "2px" : "0px";
}

function toggleWave(){
    let wave = document.getElementById("soundwave");
    if(audio.paused) wave.classList.add("paused");
    else wave.classList.remove("paused");
}

function formatTime(s) {
    if(isNaN(s)) return "0:00";
    let min = Math.floor(s / 60);
    let sec = Math.floor(s % 60);
    if(sec < 10) sec = "0" + sec;
    return min + ":" + sec;
}
</script>

</body>
</html>
